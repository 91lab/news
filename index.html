<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>News</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: Arial, sans-serif;
        background: #f0f0f0;
    }
    .newspaper {
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
    }
    .header {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding: 10px;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .controls {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 10px;
    }
    button, select, input {
        padding: 6px 12px;
        font-size: 14px;
    }
    #image-container {
        width: 100%;
        flex: 1;
        overflow: hidden;
        position: relative;
        margin-top: 10px;
        cursor: grab;
        background-color: #fff;
        touch-action: none;
    }
    #zoom-image {
        position: absolute;
        top: 0;
        left: 0;
        transform-origin: top left;
        transition: transform 0.05s ease;
        user-select: none;
        max-width: none;
        width: 100%;
    }
    #loading-overlay {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
        z-index: 10;
    }
</style>
</head>
<body>
<div class="newspaper">
    <div class="header">
        <h2 id="page-title">Dainik Sambad</h2>
        <div class="controls">
            <input type="date" id="date-select">
            <select id="page-select"></select>
        </div>
    </div>

    <div id="image-container">
        <iframe width="100%" height="100%" style="border:none;" id="pdf-source"></iframe>
    </div>
</div>

<script>
const pageSelect = document.getElementById("page-select");
const dateInput = document.getElementById("date-select");
const pdfSource = document.getElementById("pdf-source");

// Fill page selector
for (let i = 1; i <= 10; i++) {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = `Page ${i}`;
    pageSelect.appendChild(option);
}

// Set yesterday as default date
let yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);
dateInput.valueAsDate = yesterday;

let dd = String(yesterday.getDate()).padStart(2, '0');
let mm = String(yesterday.getMonth() + 1).padStart(2, '0');
let yyyy = yesterday.getFullYear();
let dateString = `${dd}${mm}${yyyy}`;
let displayDate = `${dd}-${mm}-${yyyy}`;

let scale = 1, minScale = 1, maxScale = 5;
let posX = 0, posY = 0;
let startX = 0, startY = 0;
let isDragging = false;
let currentPage = 1;

function loadPDF() {
    pdfSource.src = `https://dainiksambad.net/epaperimages/${dateString}/PAGE-${currentPage}.PDF`;
}

pageSelect.addEventListener("change", () => {
    currentPage = parseInt(pageSelect.value, 10);
    loadPDF();
});

dateInput.addEventListener("change", () => {
    const selectedDate = new Date(dateInput.value);
    const d = String(selectedDate.getDate()).padStart(2, '0');
    const m = String(selectedDate.getMonth() + 1).padStart(2, '0');
    const y = selectedDate.getFullYear();
    dateString = `${d}${m}${y}`;
    displayDate = `${d}-${m}-${y}`;
    currentPage = 1;
    pageSelect.value = 1;
    loadPDF();
});

// Initial load
loadPDF();
</script>
</body>
</html>
